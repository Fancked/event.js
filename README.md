# event.js

基于原生js开发，提供关于事件的一些api

## 介绍

### 为什么需要 event.js ?

1. 原生js并未提供获取页面事件的相应功能

2. 原生js不支持解绑匿名函数的事件监听

### 如何使用

只需要在绑定事件前引入event.js即可

### 注意

必须在绑定事件前引入event.js，在此之前的事件将被忽略。

目前只支持 支持addEventListener的浏览器。未来将有可能扩展相应的功能。

## 事件对象

绑定事件后，会自动生成相应的事件对象。在每个事件对象中会存储本次事件一部分属性。

### 结构 

**{target,type,event,useCapture}**

### 属性

#### target

HTML DOM元素对象，本次事件绑定的对象 

#### type

字符串，本次事件触发条件。

#### event

函数，本次事件触发时执行的函数。

#### useCapture

布尔值，指定事件是否在捕获或冒泡阶段执行。

可能值:

- true - 事件句柄在捕获阶段执行
- false - 默认值，事件句柄在冒泡阶段执行



## api

### window对象

#### window.getAllEvents()

**功能：**获取当前页面所有事件

**参数：**无

**返回值：**

| 类型 | 描述                           |
| ---- | ------------------------------ |
| 数组 | 包含当前页面所有事件对象的集合 |

#### window.getEventsByTarget(target, simplify, origin)

**功能：**获取所有绑定对象为选定值的事件

**参数：**

| 参数     | 可选值                | 类型    | 描述                                                         |
| -------- | :-------------------- | :------ | :----------------------------------------------------------- |
| target   | CSS 选择器            | String  | 指定一个或多个匹配 CSS 选择器的元素。可以通过 id, class, 类型, 属性, 属性值等作为选择器来获取元素。 |
|          | NodeList 对象         | Object  | 节点的集合。                                                 |
|          | HTML DOM Element 对象 | Object  | HTML 元素。                                                  |
| simplify | true（默认）          | Boolean | 对返回值进行简化。对于target为CSS选择器或NodeList对象时，将对元素各自的事件对象的集合进行合并，返回元素公共的事件对象的集合。 |
|          | false                 | Boolean | 对返回值不进行简化。对于target为CSS选择器或NodeList对象时，将返回元素各自的事件对象的集合。 |
| origin   |                       | Array   | 设置本次操作基于的事件对象列表，默认值为当前页面的所有事件对象的集合。 |

**返回值：**

| 类型 | 描述                                                         |
| ---- | ------------------------------------------------------------ |
| 数组 | 包含当前页面所有绑定对象为选定值的事件对象的集合。对于target为多个element元素时，将返回这些元素的公共的事件对象的集合。 |

#### window.getEventsByType(type, simplify, origin)

**功能：**获取当前页面所有绑定事件类型为选定值的事件

**参数：**

| 参数     | 可选值       | 类型    | 描述                                                         |
| -------- | :----------- | :------ | :----------------------------------------------------------- |
| type     |              | String  | 指定绑定事件的类型。                                         |
| simplify | true（默认） | Boolean | 对返回值进行简化。对于target为CSS选择器或NodeList对象时，将对元素各自的事件对象的集合进行合并，返回元素公共的事件对象的集合。 |
|          | false        | Boolean | 对返回值不进行简化。对于target为CSS选择器或NodeList对象时，将返回元素各自的事件对象的集合。 |
| origin   |              | Array   | 设置本次操作基于的事件对象列表，默认值为当前页面的所有事件对象的集合。 |

**返回值：**

| 类型 | 描述                                                 |
| ---- | ---------------------------------------------------- |
| 数组 | 包含当前页面所有绑定事件类型为选定值的事件对象的集合 |

#### window.getEventsByEvent(event, simplify, origin)

**功能：**获取当前页面所有绑定事件函数为选定值的事件

**参数：**

| 参数     | 可选值       | 类型     | 描述                                                         |
| -------- | :----------- | :------- | :----------------------------------------------------------- |
| event    |              | Function | 指定绑定的事件。                                             |
| simplify | true（默认） | Boolean  | 对返回值进行简化。对于target为CSS选择器或NodeList对象时，将对元素各自的事件对象的集合进行合并，返回元素公共的事件对象的集合。 |
|          | false        | Boolean  | 对返回值不进行简化。对于target为CSS选择器或NodeList对象时，将返回元素各自的事件对象的集合。 |
| origin   |              | Array    | 设置本次操作基于的事件对象列表，默认值为当前页面的所有事件对象的集合。 |

**返回值：**

| 类型 | 描述                                             |
| ---- | ------------------------------------------------ |
| 数组 | 包含当前页面所有绑定事件为选定值的事件对象的集合 |

#### window.getEvents(obj, simplify, origin)

**功能：**获取当前页面满足所设置条件的事件对象的集合。

**参数：**

| 参数     | 可选值                         | 类型    | 描述                                                         |
| -------- | :----------------------------- | :------ | :----------------------------------------------------------- |
| obj      | {target,type,event,useCapture} | Object  | 指定符合的事件对象的标准。                                   |
| simplify | true（默认）                   | Boolean | 对返回值进行简化。对于target为CSS选择器或NodeList对象时，将对元素各自的事件对象的集合进行合并，返回元素公共的事件对象的集合。 |
|          | false                          | Boolean | 对返回值不进行简化。对于target为CSS选择器或NodeList对象时，将返回元素各自的事件对象的集合。 |
| origin   |                                | Array   | 设置本次操作基于的事件对象列表，默认值为当前页面的所有事件对象的集合。 |

**返回值：**

| 类型 | 描述                                             |
| ---- | ------------------------------------------------ |
| 数组 | 包含当前页面所有绑定事件为选定值的事件对象的集合 |

### element对象

#### element.getAllEvents()

**功能：**获取当前元素上所绑的所有事件

**参数：**无

**返回值：**

| 类型 | 描述                                   |
| ---- | -------------------------------------- |
| 数组 | 包含当前元素上所绑的所有事件对象的集合 |

#### element.getEventsByType(type, simplify, origin)

**功能：**获取当前元素上所有绑定事件类型为选定值的事件

**参数：**

| 参数     | 可选值       | 类型    | 描述                                                         |
| -------- | :----------- | :------ | :----------------------------------------------------------- |
| type     |              | String  | 指定绑定事件的类型。                                         |
| simplify | true（默认） | Boolean | 对返回值进行简化。                                           |
|          | false        | Boolean | 对返回值不进行简化。                                         |
| origin   |              | Array   | 设置本次操作基于的事件对象列表，默认值为当前元素上的所有事件对象的集合。 |

**返回值：**

| 类型 | 描述                                                   |
| ---- | ------------------------------------------------------ |
| 数组 | 包含当前元素上所有绑定事件类型为选定值的事件对象的集合 |

#### element.getEventsByEvent(event, simplify, origin)

**功能：**获取当前元素上所有绑定事件函数为选定值的事件

**参数：**

| 参数     | 可选值       | 类型     | 描述                                                         |
| -------- | :----------- | :------- | :----------------------------------------------------------- |
| event    |              | Function | 指定绑定的事件。                                             |
| simplify | true（默认） | Boolean  | 对返回值进行简化。                                           |
|          | false        | Boolean  | 对返回值不进行简化。                                         |
| origin   |              | Array    | 设置本次操作基于的事件对象列表，默认值为当前元素上的所有事件对象的集合。 |

**返回值：**

| 类型 | 描述                                               |
| ---- | -------------------------------------------------- |
| 数组 | 包含当前元素上所有绑定事件为选定值的事件对象的集合 |

#### element.getEvents(obj, simplify, origin)

**功能：**获取当前页面满足所设置条件的事件对象的集合。

**参数：**

| 参数     | 可选值                  | 类型    | 描述                                                         |
| -------- | :---------------------- | :------ | :----------------------------------------------------------- |
| obj      | {type,event,useCapture} | Object  | 指定符合的事件对象的标准。                                   |
| simplify | true（默认）            | Boolean | 对返回值进行简化。                                           |
|          | false                   | Boolean | 对返回值不进行简化。                                         |
| origin   |                         | Array   | 设置本次操作基于的事件对象列表，默认值为当前元素上的所有事件对象的集合。 |

**返回值：**

| 类型 | 描述                                               |
| ---- | -------------------------------------------------- |
| 数组 | 包含当前元素上所有绑定事件为选定值的事件对象的集合 |

### 补充

#### 为什么引入参数simplify？

主要针对window.getEventByTarget方法中，对于参数target，给予太多的可能性。对于某一类的element元素集合，它们对于同一个事件来说，都有各自的事件对象。所以在target中，如果element元素集合中元素过多，对于window.getEventByTarget的返回值也会复杂。引入参数simplify，当其处于工作时，对于同一事件的不同事件对象，将会采取合并。

当然，不仅window.getEventByTarget方法，所有引入参数simplify的方法，在合并的过程中，都将删除其返回值中事件对象的对应属性。这是我选择的简化方式，而被删除的部分则是在调用方法时所传的参数，并不会消失。

####　为什么没有getEventByUseCapture？

这个方法并不常用，因为几乎没有人会根据这个事件是在捕获还是冒泡阶段进行获取。但是如果你存在这方面需求，可以通过getEvents中传入相应的值进行操作。